# UI Mockup: マイページ

**画面名**: マイページ  
**ユーザー**: 購入者（ログイン済み）  
**URL**: `/mypage/`  
**前提条件**: 会員ログイン済み

---

## 画面レイアウト

```
┌──────────────────────────────────────────────────────────────┐
│ TicketPro                    [マイページ] [user@example.com▼] │
└──────────────────────────────────────────────────────────────┘

┌──────────────────────────────────────────────────────────────┐
│ マイページ                                                   │
├──────────────────────────────────────────────────────────────┤
│                                                              │
│ [チケット一覧] [購入履歴] [会員情報] [パスワード変更]       │
│                                                              │
│ ═══════════════════════════════════════════════════════════  │
│                                                              │
│ チケット一覧 (3件)                                           │
│ ┌────────────────────────────────────────────────────────┐  │
│ │ 東京コンサート2026                                      │  │
│ │ 2026年1月20日(月) 19:00 ～                              │  │
│ │ 東京ホール                                              │  │
│ │                                                        │  │
│ │ チケット番号: ABCD1234EFGH5678                          │  │
│ │ 座席: 1階席-A-5 (S席)                                   │  │
│ │ ステータス: [有効]                                      │  │
│ │                                                        │  │
│ │ ┌──────────────────┐                                   │  │
│ │ │                  │  ← QRコード                       │  │
│ │ │    QR CODE       │                                   │  │
│ │ │                  │                                   │  │
│ │ └──────────────────┘                                   │  │
│ │                                                        │  │
│ │ [チケット詳細] [PDFダウンロード] [キャンセル申請]      │  │
│ └────────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌────────────────────────────────────────────────────────┐  │
│ │ 大阪ライブツアー                                        │  │
│ │ 2026年1月25日(土) 18:00 ～                              │  │
│ │ 大阪城ホール                                            │  │
│ │                                                        │  │
│ │ チケット番号: XYZA9876BCDE4321                          │  │
│ │ 座席: 2階席-5-10 (A席)                                  │  │
│ │ ステータス: [有効]                                      │  │
│ │                                                        │  │
│ │ ┌──────────────────┐                                   │  │
│ │ │    QR CODE       │                                   │  │
│ │ └──────────────────┘                                   │  │
│ │                                                        │  │
│ │ [チケット詳細] [PDFダウンロード] [キャンセル申請]      │  │
│ └────────────────────────────────────────────────────────┘  │
│                                                              │
│ ┌────────────────────────────────────────────────────────┐  │
│ │ 名古屋フェスティバル                                    │  │
│ │ 2025年12月15日(日) 12:00 ～                             │  │
│ │ ナゴヤドーム                                            │  │
│ │                                                        │  │
│ │ チケット番号: MNOP5432QRST9876                          │  │
│ │ 座席: 自由席                                            │  │
│ │ ステータス: [使用済み] (入場日時: 2025/12/15 11:45)    │  │
│ │                                                        │  │
│ │ [チケット詳細]                                          │  │
│ └────────────────────────────────────────────────────────┘  │
│                                                              │
└──────────────────────────────────────────────────────────────┘
```

---

## 画面要素

### タブメニュー

| タブ | 説明 |
|-----|------|
| チケット一覧 | 購入済みチケットの一覧 |
| 購入履歴 | 過去の購入履歴 |
| 会員情報 | 会員情報の表示・編集 |
| パスワード変更 | パスワード変更フォーム |

### チケットカード

各チケットカードには以下を表示：

| 要素 | 説明 |
|-----|------|
| イベント名 | イベント名 |
| 開催日時 | YYYY年MM月DD日(曜日) HH:MM ～ |
| 会場 | 会場名 |
| チケット番号 | 16桁の英数字 |
| 座席 | ブロック-列-番号 (座席種別) または 自由席 |
| ステータス | 有効/使用済み/キャンセル済み |
| QRコード | チケットQRコード（有効なチケットのみ） |

### ボタン

| ボタン | 表示条件 | 動作 |
|-------|---------|------|
| [チケット詳細] | 常時 | チケット詳細ページへ遷移 |
| [PDFダウンロード] | 有効なチケットのみ | チケットPDFをダウンロード |
| [キャンセル申請] | 有効なチケットのみ | キャンセル申請フォームへ遷移 |

---

## 動作フロー

### 正常フロー

1. 購入者がログイン後、[マイページ]をクリック
2. チケット一覧タブが表示される（デフォルト）
3. 購入済みチケットが開催日時の昇順で表示される
4. QRコードが表示される（有効なチケットのみ）
5. [PDFダウンロード]ボタンでチケットPDFをダウンロード

### タブ切り替え

- [購入履歴]タブ: 過去の注文履歴を表示
- [会員情報]タブ: 氏名、メール、電話番号を表示・編集
- [パスワード変更]タブ: 現在のパスワード、新しいパスワード入力フォーム

---

## 購入履歴タブ

```
┌────────────────────────────────────────────────────────┐
│ 購入履歴 (5件)                                         │
│                                                        │
│ ┌──────────────────────────────────────────────────┐  │
│ │ 注文番号: ORD123456789ABCDEF                      │  │
│ │ 注文日時: 2026年1月11日 10:30                     │  │
│ │ イベント: 東京コンサート2026                      │  │
│ │ 枚数: 2枚                                          │  │
│ │ 合計金額: ¥10,000                                  │  │
│ │ ステータス: [決済完了]                            │  │
│ │                                     [詳細を見る]   │  │
│ └──────────────────────────────────────────────────┘  │
│                                                        │
│ ┌──────────────────────────────────────────────────┐  │
│ │ 注文番号: ORD987654321FEDCBA                      │  │
│ │ 注文日時: 2026年1月5日 15:20                      │  │
│ │ イベント: 大阪ライブツアー                        │  │
│ │ 枚数: 1枚                                          │  │
│ │ 合計金額: ¥4,000                                   │  │
│ │ ステータス: [決済完了]                            │  │
│ │                                     [詳細を見る]   │  │
│ └──────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────┘
```

---

## 会員情報タブ

```
┌────────────────────────────────────────────────────────┐
│ 会員情報                                               │
│                                                        │
│ ┌──────────────────────────────────────────────────┐  │
│ │ 氏名 *:      [山田 太郎                      ]    │  │
│ │ メール *:    [user@example.com               ]    │  │
│ │ 電話番号:    [090-1234-5678                  ]    │  │
│ │ 生年月日:    [1990/01/01]                         │  │
│ │                                                  │  │
│ │ 登録日時: 2025年12月1日                           │  │
│ │                                                  │  │
│ │                      [キャンセル]  [保存する]     │  │
│ └──────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────┘
```

---

## パスワード変更タブ

```
┌────────────────────────────────────────────────────────┐
│ パスワード変更                                         │
│                                                        │
│ ┌──────────────────────────────────────────────────┐  │
│ │ 現在のパスワード *: [●●●●●●●●●●●●        ]    │  │
│ │                                                  │  │
│ │ 新しいパスワード *: [●●●●●●●●●●●●        ]    │  │
│ │                     (8文字以上)                   │  │
│ │                                                  │  │
│ │ パスワード確認 *:   [●●●●●●●●●●●●        ]    │  │
│ │                                                  │  │
│ │                      [キャンセル]  [変更する]     │  │
│ └──────────────────────────────────────────────────┘  │
└────────────────────────────────────────────────────────┘
```

---

## レスポンシブ対応

### PC (1024px以上)
- チケットカードは横2列表示
- QRコードを大きく表示

### タブレット (768px - 1023px)
- チケットカードは縦1列表示
- タブメニューは横スクロール可能

### スマホ (767px以下)
- チケットカードは縦1列表示（コンパクト）
- QRコードは中央に大きく表示
- ボタンはフルサイズ

---

## Constitution遵守チェック

✅ **データモデル中心**: Ticket, Order, Userモデルから情報取得  
✅ **アクセス制御**: ログインユーザー自身のチケットのみ表示  
✅ **QRコード表示**: 有効なチケットのみQRコード表示  
✅ **PDFダウンロード**: チケットPDF生成サービスと連携  
✅ **レスポンシブデザイン**: Bootstrap 5で実装  
✅ **セキュリティ**: パスワード変更時に現在のパスワード確認
